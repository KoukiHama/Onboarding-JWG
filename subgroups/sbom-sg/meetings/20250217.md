# OpenChain Japan Automation & SBOM sg - 2025/02/17  

## 資料  

[20250217](./20250217) フォルダ参照  

## 共有された課題  

1. 依存関係の情報不足  
   現在のSBOMでは、依存関係のあるパッケージが全て表現されていない場合があり、脆弱性管理が難しくなる。  
   - 主要パッケージとして生成されたSBOMは、対象のパッケージ自体の情報（名前、バージョン、ビルド情報など）は十分に記録されているが、Source SBOMが提供されている場合があり、ビルドや実行時に依存している他のライブラリやコンポーネントについては、情報収集や記載が行われていない可能性がある。  
   - また、Build SBOMであっても、ビルドシステムから出力されるSBOMが、パッケージ化された成果物のみを対象としており、依存している外部パッケージ（例：ライブラリ、プラグイン、モジュールなど）の情報を自動的に取り込まないというツール上、運用上の問題も可能性として存在する。  

2. 記載内容の不完全性  
   SBOMのValueとして記載される情報が不完全であり、ライセンス管理、脆弱性情報とのマッチングが難しくなる。  
   - ライセンス関連情報  
     ライセンス識別子やバージョン情報が曖昧（例：単に「GPL」とだけ記載され、具体的なライセンスバージョンが明記されていない）  
     SPDX Short Identifier形式が定義されていないライセンスや、ツール独自のIDでの記載  
   - ビルド情報  
     ビルドID、ビルド日時、ビルドシステムやホストの情報など、どの環境で生成されたのかの詳細は必須で無い為、脆弱性追跡が困難。  
   - 補足情報  
     SPDX v2.3のAnnotation Fieldを用いるなど、補足情報が記載されている場合があるが、自由入力に依存しており、一貫性や正確性に欠ける。  

3. 情報の多様性と標準化の不足  
   - ライセンス管理、脆弱性の確実な追跡を行うためには、NTIA最小要素に加えて収集すべき追加の情報が存在する場合がある。（例：ビルドオプション、ビルド環境情報等）  
   しかし、どのような場合に何が必要な情報なのかが標準化されておらず、どのフィールドにどのような値を記載すべきかが決まっていない。  
   - ツールによっては、特定のプログラミング言語やパッケージマネージャーに対するサポートが不十分であり、ツール毎に収集される情報、その情報が記載されるフィールドに違いがある。  
   - サプライチェーンの中でパッケージがカスタマイズや再パッケージされることがあり、元々のビルド情報との整合性が崩れ、正しい依存関係や情報に間違いが発生する場合がある。  
     

4. 改ざん検知や更新プロセスの課題  
   SBOM情報そのものが変更（改ざんや更新）される可能性に対して、再取得や正当性検証を自動で行う仕組みを構築することが難しい。  
   - SBOM情報そのものが改ざんされているかどうかを確認する手段が規程されていない。  

5. 自動化の困難さ  
   現状、ツールが出力する結果について、人間による最終的な確認（レビュー）や補正が不可欠となっており、完全な自動化を実現することが困難。  
   システム的に自動化しても、カスタマイズや環境依存の微妙な違い、あるいは曖昧な記載部分については人的介入が必要となり、トータルでの自動化の効率にブレーキがかかる。  

## 解決案と自動化について  

1. 依存関係の情報不足  
   - チェック項目  
     - 対象パッケージ自体の基本情報（名前、バージョン、ビルド情報）の記載状況  
     - 対象パッケージが依存している外部ライブラリ、プラグイン、モジュールなどの記載有無  
     - 提供される SBOM Types の把握とType毎の整合性  
     - ツールで自動取得される依存関係情報の範囲と網羅性  
   - 解決策（プロセス・仕組み）  
     - ビルドプロセスに依存関係を自動的に抽出する機能を組み込む（例：パッケージマネージャーやソース管理システムとの連携）  
     - Source SBOM と Build SBOM を補完的に利用し、ソースコードレベルからトランジティブな依存関係も取得する仕組みを整備する  
     - 依存関係データの漏れがないか定期的にレビューし、欠落検出ルール（チェックリスト）を整備する  
    - 自動化の可否  
      - 自動化可能: ツール連携による、定型フォーマットに基づいた依存情報の抽出（パッケージ管理ツール側で管理されている情報）の自動取得およびマッピング  
      - 人的確認: カスタマイズや再パッケージ等、標準外の加工が入った場合の微妙な依存関係の補完  
2. 記載内容の不完全性  
   - チェック項目  
     - ライセンス情報：識別子、具体的なバージョン、SPDX Short Identifierの準拠状況  
     - ビルド情報：ビルド毎のユニークなID、ビルド日時、ビルドシステム・ホスト環境の詳細記載の有無  
     - 補足情報：Annotation Fieldやその他自由入力部分の記載の一貫性・正確性  
   - 解決策（プロセス・仕組み）  
     - 各項目の必須記載ルールをガイドラインやチェックリストとして業界内で合意形成し、統一フォーマット（例：SPDX、CycloneDX）に沿った出力を標準とする  
     - 自動検証ツールを導入し、不備がある場合の自動警告・エラーチェックを行うプロセスを整備する  
     - レビュー工程を標準化し、自由入力部分の内容を補完できるようなテンプレートや補助ツールを用意する  
   - 自動化の可否  
     - 自動化可能: 標準化されたデータフォーマットに対する自動検証とチェック、欠落や不整合を検出するアラート  
     - 人的確認: 自由入力部分や非定型の記載内容の最終的な品質保証、意味の精査といった人的判断が必要な部分  
3. 情報の多様性と標準化の不足  
   - チェック項目  
     - NTIA最小要素と、それに加えるべき追加情報（例：ビルドオプション、環境情報）の有無  
     - 各ツールごとに出力されるフィールド内容の違いの確認  
     - サプライチェーン全体での再パッケージやカスタマイズ時に、元のビルド情報との整合性の保持状況  
   - 解決策（プロセス・仕組み）  
     - 業界全体またはコミュニティ内で「必須フィールド」と「追加情報」として何が必要かを合意するガイドラインを策定する  
     - 複数ツール間での情報マッピングルール、変換ロジックを標準化し、各ツール出力の統合作業を自動補完する仕組みを導入する  
     - 再パッケージやカスタマイズのプロセスにおいて、元ビルド情報が失われないような運用ルール・監査プロセスを構築する  
   - 自動化の可否  
     - 自動化可能: 各種ツール出力の標準フォーマットへの変換および自動マッピング、定型情報の抽出とチェックリストに基づく自動検証、不足情報の補完候補の自動提示  
     - 人的確認: 個別のプロジェクトや環境、特定言語・パッケージマネージャー固有の特殊要件に完全対応すること、サプライチェーン全体でのカスタマイズ工程による情報の喪失・変化の自動検知および完全補完  
4. 改ざん検知や更新プロセスの課題  
   - チェック項目  
     - SBOMにデジタル署名やハッシュ値が付与されているか  
     - 棄損・改ざんを検知するための監査ログの整備状況  
     - 定期的な更新・再配布の運用プロセス  
   - 解決策（プロセス・仕組み）  
     - SBOM生成時にデジタル署名や証明書、ハッシュによる整合性チェックを組み込む仕組みを導入する  
     - 定期的な自動監視システムを構築し、署名検証や改ざん疑義のあるSBOMについて自動でアラートを発出するプロセスを整備する  
     - 更新プロセスのルール（例えば定期的な再配布手順）を明文化し、自動配布システムと連携する仕組みを検討する  
   - 自動化の可否  
     - 自動化可能: デジタル署名・ハッシュ値の自動検証による改ざんチェックの自動化、監視ツールによる連続モニタリングと自動アラートの発行  
     - 人的確認: 根本的な改ざん防止策そのもの（運用やアクセス管理、人的監視による対策）、改ざんの疑いがあった場合の最終判断や再配布後の内容の正当性検証（一定の人的介入が必須）  
5. 自動化の困難さ  
   - チェック項目  
     - 自動生成されたSBOMの精度：欠落項目や不整合箇所がないか  
     - 自動チェックプロセスで補正が必要な項目の抽出  
     - 自動ツールと人的レビューの連携状況・レビュー工程の明確化  
   - 解決策（プロセス・仕組み）  
     - 定型的な情報収集や検証については自動化ツール（チェックリスト、警告機能）の導入と、出力結果の自動整形・変換を行う仕組みを整備する  
     - 自動化と人的レビューを組み合わせたハイブリッドモデルを構築し、自動チェックで異常が検出された部分のみ人的介入で補正する運用フローを確立する  
     - 自動化ツールに対して標準テンプレートやマッピングルールを適用し、ツール間の出力差異を吸収する仕組みを検討する  
   - 自動化の可否  
     - 自動化可能: 定型的なデータ収集、フォーマット変換、自動チェック機能による欠落／不整合の検出、自動的な警告発信と、標準化されたレポートの作成  
     - 人的確認: 人間の判断が必要な部分（カスタマイズや環境依存の微妙な違い、自由記述部分の意味検証）、全体としての正確性の保証や、運用ルールに沿った最終確認プロセスの完全自動化は困難であり、必然的に人的レビューが最終段階で求められる  
